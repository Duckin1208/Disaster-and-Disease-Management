<UserControl x:Class="Disease_Disaster.Views.DisasterManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White" Height="700" Width="1100">
	<Grid Margin="15">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<StackPanel Grid.Row="0" Margin="0,0,0,15">
			<TextBlock Text="QUẢN LÝ THIÊN TAI &amp; SẠT LỞ" FontSize="22" FontWeight="Bold" Foreground="#D35400" Margin="0,0,0,10"/>

			<StackPanel Orientation="Horizontal">
				<RadioButton x:Name="rbTruotLo" Content="Trượt lở đất" GroupName="Type" IsChecked="True" 
                             FontSize="14" Margin="0,0,20,0" Checked="RadioButton_Checked"/>
				<RadioButton x:Name="rbLuQuet" Content="Lũ quét" GroupName="Type" 
                             FontSize="14" Checked="RadioButton_Checked"/>
			</StackPanel>
		</StackPanel>

		<Border Grid.Row="1" BorderBrush="#DDD" BorderThickness="1" Padding="10" Background="#FEF9E7" Margin="0,0,0,10">
			<StackPanel Orientation="Horizontal">
				<Label Content="Tìm kiếm:" VerticalAlignment="Center"/>
				<TextBox x:Name="txtSearch" Width="300" Height="30" VerticalContentAlignment="Center" Margin="10,0" 
                         ToolTip="Tìm theo địa điểm..."/>
				<Button Content="🔍 Tìm Kiếm" Width="100" Height="30" Background="#E67E22" Foreground="White" Click="btnSearch_Click"/>
			</StackPanel>
		</Border>

		<DataGrid x:Name="dgThienTai" Grid.Row="2" AutoGenerateColumns="False" IsReadOnly="True" 
                  BorderBrush="#CCC" BorderThickness="1" RowHeight="40" SelectionMode="Single">
			<DataGrid.Columns>
				<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
				<DataGridTextColumn Header="Địa Điểm" Binding="{Binding TenDonVi}" Width="200" FontWeight="Bold"/>
				<DataGridTextColumn Header="Cấp HC" Binding="{Binding CapHanhChinh}" Width="100"/>
				<DataGridTextColumn Header="Loại Thiên Tai" Binding="{Binding TenLoai}" Width="150"/>
				<DataGridTextColumn Header="Mức Độ" Binding="{Binding MucDo}" Width="80"/>

				<DataGridTemplateColumn Header="File Đính Kèm" Width="120">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Button Content="📂 Xem File" FontSize="11" Height="25" Click="btnViewFile_Click"/>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>

				<DataGridTemplateColumn Header="Tác vụ" Width="100">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<Button Content="❌ Xóa" Background="#E74C3C" Foreground="White" Click="btnDelete_Click"/>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>

		<GroupBox Grid.Row="3" Header="Thêm Báo Cáo Mới" Margin="0,15,0,0" BorderBrush="#D35400" Foreground="#D35400" FontWeight="Bold">
			<Grid Margin="10">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="120"/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<Label Content="Địa điểm:" Grid.Row="0" Grid.Column="0" Foreground="Black" FontWeight="Normal"/>

				<Grid Grid.Row="0" Grid.Column="1" Margin="5">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>
					<ComboBox x:Name="cbTinh" Grid.Column="0" Height="30" Margin="0,0,2,0" 
                              DisplayMemberPath="Ten" SelectedValuePath="Id"
                              SelectionChanged="cbTinh_SelectionChanged" 
                              ToolTip="Chọn Tỉnh/Thành phố"/>

					<ComboBox x:Name="cbDonVi" Grid.Column="1" Height="30" Margin="2,0,0,0" 
                              DisplayMemberPath="Ten" SelectedValuePath="Id"
                              ToolTip="Chọn Quận/Huyện"/>
				</Grid>

				<Label Content="Mức độ:" Grid.Row="0" Grid.Column="2" Foreground="Black" FontWeight="Normal"/>
				<ComboBox x:Name="cbMucDo" Grid.Row="0" Grid.Column="3" Height="30" Margin="5">
					<ComboBoxItem Content="1" IsSelected="True"/>
					<ComboBoxItem Content="2"/>
					<ComboBoxItem Content="3"/>
					<ComboBoxItem Content="4"/>
					<ComboBoxItem Content="5"/>
				</ComboBox>

				<Label Content="File báo cáo:" Grid.Row="1" Grid.Column="0" Foreground="Black" FontWeight="Normal"/>
				<DockPanel Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Margin="5">
					<Button Content="..." Width="40" DockPanel.Dock="Right" Click="btnBrowseFile_Click"/>
					<TextBox x:Name="txtFilePath" Height="30" IsReadOnly="True" Background="#F2F3F4"/>
				</DockPanel>

				<Button Content="LƯU" Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" 
                        Height="65" Margin="10,5,0,5" Background="#D35400" Foreground="White" Click="btnAdd_Click"/>
			</Grid>
		</GroupBox>
	</Grid>
</UserControl>