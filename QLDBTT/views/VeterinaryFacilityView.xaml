<UserControl x:Class="Disease_Disaster.Views.VeterinaryFacilityView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             d:DesignHeight="700" d:DesignWidth="1100" Background="White">

	<Grid Margin="15">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<StackPanel Grid.Row="0" Margin="0,0,0,15">
			<TextBlock Text="QUẢN LÝ CƠ SỞ CHĂN NUÔI &amp; DỊCH VỤ THÚ Y" 
                       FontSize="22" FontWeight="Bold" Foreground="#2C3E50"/>

			<StackPanel Orientation="Horizontal" Margin="0,10,0,0">
				<Label Content="Chọn Loại Hình Quản Lý:" VerticalAlignment="Center" FontWeight="Bold"/>
				<ComboBox x:Name="cbFilterType" Width="300" Height="30" Margin="10,0" 
                          DisplayMemberPath="Ten" SelectedValuePath="Ten" 
                          SelectionChanged="cbFilterType_SelectionChanged"/>
				<TextBlock Text="(Chọn loại hình để xem dữ liệu tương ứng)" VerticalAlignment="Center" FontStyle="Italic" Foreground="Gray"/>
			</StackPanel>
		</StackPanel>

		<Border Grid.Row="1" BorderBrush="#DDD" BorderThickness="1" Padding="10" Background="#ECF0F1" Margin="0,0,0,10">
			<StackPanel Orientation="Horizontal">
				<Label Content="Tìm kiếm:" VerticalAlignment="Center"/>
				<TextBox x:Name="txtSearch" Width="250" Height="30" VerticalContentAlignment="Center" Margin="5,0"
                         TextChanged="txtSearch_TextChanged" ToolTip="Tìm theo tên cơ sở..."/>

				<Button Content="📊 Xem Thống Kê Hộ Nhỏ Lẻ" Width="200" Height="30" Margin="20,0,0,0" 
                        Background="#8E44AD" Foreground="White" FontWeight="Bold" Click="btnStats_Click"/>
			</StackPanel>
		</Border>

		<DataGrid x:Name="dgFacilities" Grid.Row="2" AutoGenerateColumns="False" IsReadOnly="True" 
                  BorderBrush="#CCC" BorderThickness="1" RowHeight="40" SelectionMode="Single">
			<DataGrid.Columns>
				<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50"/>
				<DataGridTextColumn Header="Tên Cơ Sở" Binding="{Binding Ten}" Width="250" FontWeight="Bold"/>
				<DataGridTextColumn Header="Loại Hình" Binding="{Binding TenLoaiCoSo}" Width="180"/>
				<DataGridTextColumn Header="Địa Điểm" Binding="{Binding TenDonVi}" Width="150"/>
				<DataGridTextColumn Header="Quy Mô" Binding="{Binding QuyMo}" Width="100"/>
				<DataGridTextColumn Header="SĐT" Binding="{Binding SDT}" Width="120"/>

				<DataGridTemplateColumn Header="Tác vụ" Width="220">
					<DataGridTemplateColumn.CellTemplate>
						<DataTemplate>
							<StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
								<Button Content="📜 Giấy Phép" Width="90" Height="30" Margin="2" 
                                        Background="#3498DB" Foreground="White" Click="btnLicense_Click"/>

								<Button Content="❌ Xóa" Width="60" Height="30" Margin="2" 
                                        Background="#E74C3C" Foreground="White" Click="btnDelete_Click"/>
							</StackPanel>
						</DataTemplate>
					</DataGridTemplateColumn.CellTemplate>
				</DataGridTemplateColumn>
			</DataGrid.Columns>
		</DataGrid>

		<GroupBox Grid.Row="3" Header="Thêm Mới Cơ Sở" Margin="0,15,0,0" BorderBrush="#27AE60" Foreground="#27AE60" FontWeight="Bold">
			<Grid Margin="10">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="100"/>
				</Grid.ColumnDefinitions>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto"/>
					<RowDefinition Height="Auto"/>
				</Grid.RowDefinitions>

				<Label Content="Tên Cơ sở:" Grid.Row="0" Grid.Column="0" Foreground="Black" FontWeight="Normal"/>
				<TextBox x:Name="txtTenCoSo" Grid.Row="0" Grid.Column="1" Height="30" Margin="5"/>

				<Label Content="Loại hình:" Grid.Row="0" Grid.Column="2" Foreground="Black" FontWeight="Normal"/>
				<ComboBox x:Name="cbLoaiAdd" Grid.Row="0" Grid.Column="3" Height="30" Margin="5" 
                          DisplayMemberPath="Ten" SelectedValuePath="Id"/>

				<Label Content="Địa điểm:" Grid.Row="1" Grid.Column="0" Foreground="Black" FontWeight="Normal"/>

				<Grid Grid.Row="1" Grid.Column="1" Margin="5">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>
					<ComboBox x:Name="cbTinh" Grid.Column="0" Height="30" Margin="0,0,2,0"
                              DisplayMemberPath="Ten" SelectedValuePath="Id"
                              SelectionChanged="cbTinh_SelectionChanged" 
                              ToolTip="Chọn Tỉnh/Thành phố"/>

					<ComboBox x:Name="cbDonVi" Grid.Column="1" Height="30" Margin="2,0,0,0"
                              DisplayMemberPath="Ten" SelectedValuePath="Id"
                              ToolTip="Chọn Quận/Huyện"/>
				</Grid>

				<Label Content="Quy mô/SĐT:" Grid.Row="1" Grid.Column="2" Foreground="Black" FontWeight="Normal"/>
				<Grid Grid.Row="1" Grid.Column="3">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*"/>
						<ColumnDefinition Width="*"/>
					</Grid.ColumnDefinitions>
					<TextBox x:Name="txtQuyMo" Grid.Column="0" Height="30" Margin="5" ToolTip="Quy mô"/>
					<TextBox x:Name="txtSDT" Grid.Column="1" Height="30" Margin="5" ToolTip="Số điện thoại"/>
				</Grid>

				<Button Content="LƯU" Grid.Row="0" Grid.RowSpan="2" Grid.Column="4" 
                        Height="65" Margin="10,5,0,5" Background="#27AE60" Foreground="White" Click="btnAdd_Click"/>
			</Grid>
		</GroupBox>
	</Grid>
</UserControl>

