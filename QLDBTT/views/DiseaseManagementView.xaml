<UserControl x:Class="Disease_Disaster.Views.DiseaseManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             Background="White" Height="700" Width="1100">
	<Grid Margin="10">
		<TextBlock Text="QUẢN LÝ DỊCH BỆNH &amp; TIÊM PHÒNG" FontSize="22" FontWeight="Bold" Foreground="#C0392B" Margin="0,0,0,10"/>

		<TabControl Margin="0,40,0,0">

			<TabItem Header="🔥 QUẢN LÝ Ổ DỊCH" FontSize="14" FontWeight="Bold">
				<Grid Margin="10">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>

					<Border Grid.Row="0" BorderBrush="#DDD" BorderThickness="1" Padding="10" Background="#FDFEFE" Margin="0,0,0,10">
						<StackPanel Orientation="Horizontal">
							<Label Content="Tìm kiếm:" VerticalAlignment="Center"/>
							<TextBox x:Name="txtSearchOD" Width="300" Height="30" VerticalContentAlignment="Center" Margin="5,0" TextChanged="txtSearchOD_TextChanged"/>
						</StackPanel>
					</Border>

					<DataGrid x:Name="dgOutbreak" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" BorderBrush="#CCC" BorderThickness="1" RowHeight="35">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Tên Ổ Dịch" Binding="{Binding TenODich}" Width="150" FontWeight="Bold"/>
							<DataGridTextColumn Header="Dịch Bệnh" Binding="{Binding TenBenh}" Width="150"/>
							<DataGridTextColumn Header="Địa Điểm" Binding="{Binding TenDonVi}" Width="150"/>
							<DataGridTextColumn Header="Chẩn Đoán" Binding="{Binding ChanDoan}" Width="200"/>
							<DataGridTextColumn Header="Ngày PH" Binding="{Binding NgayPhatHien, StringFormat=dd/MM/yyyy}" Width="100"/>
							<DataGridTextColumn Header="Số Lượng" Binding="{Binding SoLuongMacBenh}" Width="80"/>

							<DataGridTemplateColumn Header="Tác vụ">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<Button Content="❌" Background="#E74C3C" Foreground="White" Width="30" Click="btnDeleteOutbreak_Click" ToolTip="Xóa ổ dịch"/>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</DataGrid>

					<GroupBox Grid.Row="2" Header="Khai Báo Ổ Dịch Mới" Margin="0,10,0,0" BorderBrush="#C0392B" Foreground="#C0392B">
						<Grid Margin="5">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="100"/>
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="Auto"/>
							</Grid.RowDefinitions>

							<Label Content="Tên Ổ Dịch:" Grid.Row="0" Grid.Column="0"/>
							<TextBox x:Name="txtTenODich" Grid.Row="0" Grid.Column="1" Height="25" Margin="2"/>

							<Label Content="Loại bệnh:" Grid.Row="0" Grid.Column="2"/>

							<DockPanel Grid.Row="0" Grid.Column="3" Margin="2">
								<Button Content="+" DockPanel.Dock="Right" Width="30" Height="25" 
                                        Background="#2ECC71" Foreground="White" FontWeight="Bold" 
                                        ToolTip="Thêm loại bệnh mới" Click="btnAddDiseaseType_Click"/>
								<ComboBox x:Name="cbBenhOD" Height="25" DisplayMemberPath="Ten" SelectedValuePath="Id"/>
							</DockPanel>

							<Label Content="Địa điểm (Xã):" Grid.Row="1" Grid.Column="0"/>
							<StackPanel Orientation="Horizontal" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3">
								<ComboBox x:Name="cbTinhOD" Width="120" DisplayMemberPath="Ten" SelectedValuePath="Id" SelectionChanged="cbTinhOD_SelectionChanged" Margin="2" ToolTip="Tỉnh"/>
								<ComboBox x:Name="cbHuyenOD" Width="120" DisplayMemberPath="Ten" SelectedValuePath="Id" SelectionChanged="cbHuyenOD_SelectionChanged" Margin="2" ToolTip="Huyện"/>
								<ComboBox x:Name="cbXaOD" Width="120" DisplayMemberPath="Ten" SelectedValuePath="Id" Margin="2" FontWeight="Bold" ToolTip="Xã"/>
							</StackPanel>

							<Label Content="Số lượng:" Grid.Row="2" Grid.Column="0"/>
							<TextBox x:Name="txtSoLuongOD" Grid.Row="2" Grid.Column="1" Height="25" Margin="2"/>

							<Label Content="Chẩn đoán:" Grid.Row="2" Grid.Column="2"/>
							<TextBox x:Name="txtChanDoanOD" Grid.Row="2" Grid.Column="3" Height="25" Margin="2"/>

							<Button Content="LƯU" Grid.Row="0" Grid.RowSpan="3" Grid.Column="4" Background="#C0392B" Foreground="White" Click="btnSaveOutbreak_Click"/>
						</Grid>
					</GroupBox>
				</Grid>
			</TabItem>

			<TabItem Header="💉 QUẢN LÝ TIÊM PHÒNG" FontSize="14" FontWeight="Bold">
				<Grid Margin="10">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
						<RowDefinition Height="Auto"/>
					</Grid.RowDefinitions>

					<Border Grid.Row="0" BorderBrush="#DDD" BorderThickness="1" Padding="10" Background="#FDFEFE" Margin="0,0,0,10">
						<StackPanel Orientation="Horizontal">
							<Label Content="Tìm đợt tiêm:" VerticalAlignment="Center"/>
							<TextBox x:Name="txtSearchTP" Width="300" Height="30" VerticalContentAlignment="Center" Margin="5,0" TextChanged="txtSearchTP_TextChanged"/>
						</StackPanel>
					</Border>

					<DataGrid x:Name="dgVaccine" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" BorderBrush="#CCC" BorderThickness="1" RowHeight="35">
						<DataGrid.Columns>
							<DataGridTextColumn Header="Tên Đợt Tiêm" Binding="{Binding TenDotTiem}" Width="200" FontWeight="Bold"/>
							<DataGridTextColumn Header="Bệnh" Binding="{Binding TenBenh}" Width="150"/>
							<DataGridTextColumn Header="Tại Ổ Dịch" Binding="{Binding TenODich}" Width="200" FontWeight="SemiBold" Foreground="#E67E22"/>
							<DataGridTextColumn Header="Ngày Tiêm" Binding="{Binding NgayTiem, StringFormat=dd/MM/yyyy}" Width="100"/>
							<DataGridTextColumn Header="Loại Vaccine" Binding="{Binding LoaiVaccine}" Width="150"/>
							<DataGridTextColumn Header="Số Lượng" Binding="{Binding SoLuong}" Width="80"/>
							<DataGridTextColumn Header="Người TH" Binding="{Binding NguoiThucHien}" Width="150"/>

							<DataGridTemplateColumn Header="Tác vụ">
								<DataGridTemplateColumn.CellTemplate>
									<DataTemplate>
										<Button Content="❌" Background="#E74C3C" Foreground="White" Width="30" Click="btnDeleteVaccine_Click" ToolTip="Xóa đợt tiêm"/>
									</DataTemplate>
								</DataGridTemplateColumn.CellTemplate>
							</DataGridTemplateColumn>
						</DataGrid.Columns>
					</DataGrid>

					<GroupBox Grid.Row="2" Header="Thêm Đợt Tiêm Phòng Mới" Margin="0,10,0,0" BorderBrush="#27AE60" Foreground="#27AE60">
						<Grid Margin="5">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="100"/>
							</Grid.ColumnDefinitions>
							<Grid.RowDefinitions>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="Auto"/>
								<RowDefinition Height="Auto"/>
							</Grid.RowDefinitions>

							<Label Content="Tên Đợt Tiêm:" Grid.Row="0" Grid.Column="0"/>
							<TextBox x:Name="txtTenDotTP" Grid.Row="0" Grid.Column="1" Height="25" Margin="2"/>

							<Label Content="Loại bệnh:" Grid.Row="0" Grid.Column="2"/>

							<DockPanel Grid.Row="0" Grid.Column="3" Margin="2">
								<Button Content="+" DockPanel.Dock="Right" Width="30" Height="25" 
                                        Background="#2ECC71" Foreground="White" FontWeight="Bold" 
                                        ToolTip="Thêm loại bệnh mới" Click="btnAddDiseaseType_Click"/>
								<ComboBox x:Name="cbBenhTP" Height="25" DisplayMemberPath="Ten" SelectedValuePath="Id"/>
							</DockPanel>

							<Label Content="Chọn Ổ Dịch:" Grid.Row="1" Grid.Column="0"/>
							<ComboBox x:Name="cbODichTP" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Height="25" 
                                      DisplayMemberPath="TenODich" SelectedValuePath="Id" Margin="2" 
                                      ToolTip="Chọn ổ dịch cần thực hiện tiêm phòng"/>

							<Label Content="Ngày &amp; SL:" Grid.Row="2" Grid.Column="0"/>
							<StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="1">
								<DatePicker x:Name="dpNgayTiem" Width="100" Margin="2"/>
								<TextBox x:Name="txtSoLuongTP" Width="60" Margin="2" ToolTip="Số lượng"/>
							</StackPanel>

							<Label Content="Vaccine &amp; Người TH:" Grid.Row="2" Grid.Column="2"/>
							<StackPanel Orientation="Horizontal" Grid.Row="2" Grid.Column="3">
								<TextBox x:Name="txtLoaiVaccine" Width="100" Margin="2" ToolTip="Loại Vaccine"/>
								<TextBox x:Name="txtNguoiTH" Width="100" Margin="2" ToolTip="Người thực hiện"/>
							</StackPanel>

							<Button Content="THÊM" Grid.Row="0" Grid.RowSpan="3" Grid.Column="4" Background="#27AE60" Foreground="White" Click="btnSaveVaccine_Click"/>
						</Grid>
					</GroupBox>
				</Grid>
			</TabItem>
		</TabControl>
	</Grid>
</UserControl>